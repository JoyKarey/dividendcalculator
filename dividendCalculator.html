<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Dividend Calculator</title>

  <!-- Remove arrows from number inputs -->
  <style>
    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    input[type=number] {
      -moz-appearance: textfield;
    }
  </style>
</head>

<body style="font-family: Arial, sans-serif; padding: 20px; background:#f5f7fb;">

  <div style="max-width:900px; margin:auto; background:#fff; padding:25px; border-radius:18px; box-shadow:0 8px 24px rgba(0,0,0,0.08);">

    <h2 style="color:#863376; font-size:28px; margin-bottom:6px;">Dividend Calculator</h2>
    <p style="margin-bottom:20px; color:#4b5563;">
      Calculate your annual dividends on a pro-rata basis.
    </p>

    <!-- Rate -->
    <div style="margin-bottom:20px;">
      <label><strong style="color:#413a60;">Dividend Rate (%)</strong></label><br>
      <input type="number" id="rate" value="13" step="0.01"
             style="width:100%; padding:10px; border-radius:12px; border:1px solid #d1d5db;">
    </div>

    <!-- Deposits -->
    <table style="width:100%; border-collapse:collapse; margin-bottom:20px;">
      <thead>
        <tr style="background:#f6b330; color:#fff;">
          <th style="padding:12px;">Month</th>
          <th style="padding:12px;">Amount Deposited (Ksh)</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>January<br><small>Bal b/f + January deposit</small></td><td><input type="number" id="jan"></td></tr>
        <tr><td>February<br><small>Amount deposited via Cash / Paybill / By-product</small></td><td><input type="number" id="feb"></td></tr>
        <tr><td>March<br><small>Amount deposited via Cash / Paybill / By-product</small></td><td><input type="number" id="mar"></td></tr>
        <tr><td>April<br><small>Amount deposited via Cash / Paybill / By-product</small></td><td><input type="number" id="apr"></td></tr>
        <tr><td>May<br><small>Amount deposited via Cash / Paybill / By-product</small></td><td><input type="number" id="may"></td></tr>
        <tr><td>June<br><small>Amount deposited via Cash / Paybill / By-product</small></td><td><input type="number" id="jun"></td></tr>
        <tr><td>July<br><small>Amount deposited via Cash / Paybill / By-product</small></td><td><input type="number" id="jul"></td></tr>
        <tr><td>August<br><small>Amount deposited via Cash / Paybill / By-product</small></td><td><input type="number" id="aug"></td></tr>
        <tr><td>September<br><small>Amount deposited via Cash / Paybill / By-product</small></td><td><input type="number" id="sep"></td></tr>
        <tr><td>October<br><small>Amount deposited via Cash / Paybill / By-product</small></td><td><input type="number" id="oct"></td></tr>
        <tr><td>November<br><small>Amount deposited via Cash / Paybill / By-product</small></td><td><input type="number" id="nov"></td></tr>
        <tr><td>December<br><small>Amount deposited via Cash / Paybill / By-product</small></td><td><input type="number" id="dec"></td></tr>
      </tbody>
    </table>

    <button onclick="calculateDividends()"
      style="background:#863376; color:#fff; border:none; padding:14px; border-radius:12px; width:100%; font-weight:700;">
      Calculate Dividends
    </button>

    <div id="results" style="margin-top:30px;"></div>
  </div>

<script>
function calculateDividends() {

  const rate = parseFloat(document.getElementById("rate").value) || 0;

  const months = [
    { name: "January", id: "jan", factor: 12 },
    { name: "February", id: "feb", factor: 11 },
    { name: "March", id: "mar", factor: 10 },
    { name: "April", id: "apr", factor: 9 },
    { name: "May", id: "may", factor: 8 },
    { name: "June", id: "jun", factor: 7 },
    { name: "July", id: "jul", factor: 6 },
    { name: "August", id: "aug", factor: 5 },
    { name: "September", id: "sep", factor: 4 },
    { name: "October", id: "oct", factor: 3 },
    { name: "November", id: "nov", factor: 2 },
    { name: "December", id: "dec", factor: 1 }
  ];

  let totalDividend = 0;
  let rows = "";

  months.forEach(m => {
    let deposit = parseFloat(document.getElementById(m.id).value) || 0;

    // ðŸ”¥ NEW RULE
    let appliedFactor = deposit < 0 ? 12 : m.factor;

    let dividend = (rate / 100) * Math.abs(deposit) * (appliedFactor / 12);

    totalDividend += dividend;

    rows += `
      <tr>
        <td>${m.name}</td>
        <td>Ksh ${deposit.toLocaleString()}</td>
        <td>Ksh ${dividend.toLocaleString(undefined,{minimumFractionDigits:2})}</td>
      </tr>
    `;
  });

  const tax = totalDividend * 0.05;
  const net = totalDividend - tax;

  document.getElementById("results").innerHTML = `
    <h3 style="color:#000;">Dividend Results</h3>

    <table style="width:100%; border-collapse:collapse; margin-bottom:20px;">
      <thead>
        <tr style="background:#863376; color:#fff;">
          <th style="padding:10px;">Month</th>
          <th style="padding:10px;">Deposit</th>
          <th style="padding:10px;">Dividend</th>
        </tr>
      </thead>
      <tbody>${rows}</tbody>
    </table>

    <p><strong>Total Dividend:</strong> Ksh ${totalDividend.toLocaleString(undefined,{minimumFractionDigits:2})}</p>
    <p><strong>Withholding Tax (5%):</strong> Ksh ${tax.toLocaleString(undefined,{minimumFractionDigits:2})}</p>

    <div style="background:#413a60; color:#fff; padding:14px; border-radius:12px; font-weight:700;">
      Net Dividend: Ksh ${net.toLocaleString(undefined,{minimumFractionDigits:2})}
    </div>
  `;
}
</script>

</body>
</html>
